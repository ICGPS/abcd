# 내부(중첩)클래스

내부 클래스(Inner class) : 말 그대로 클래스 내부에 선언한 클래스
         - 외부 클래스와 밀접한 관계가 있을 때, 내부에 클래스를 선언한다
         - 외부 클래스 외 다른 클래스와 협력할 일이 없을 경우에 선언한다

내부클래스의 예시
 - 외부 클래스 A 내에 생성된 내부 클래스 B
<pre>
<code>
class A {  
        class B {  
    }  
}  
</code>
</pre>
클래스가 여러 클래스와 관계를 맺는 경우는 독립적으로 선언, 특정 클래스와 관계를 맺는 경우에는 해당 클래스 내부에 선언하는 것이 좋다.
 - 여러 클래스와 관계를 맺을 때는 다른 클래스에 대한 영향력을 줄이기 위해 독립적 선언이 좋다. 
 - 특정 클래스와 관계를 맺는 경우에는 다른 클래스에 영향을 미치지 않기 위해 내부에 선언한다.

 - 즉, 둘 다 관련이 없는 다른 클래스에 미치는 영향력을 최소화 하기 위함이다.

 - 내부에 선언하게 되면, 클래스 간 관계에 대한 세부 사항을 숨길 수 있고 외부에서의 직접적인 접근을 막아 모듈성을 높일 수 있다.

* 모듈성 : 시스템을 독립적인 부분 또는 모듈로 나누고 각 모듈이 잘 정의된 인터페이스를 통해 상호 작용하도록 하는 것을 의미한다.
   - 독립적으로 개발, 테스트, 유지보수가 가능한 단위(모듈)로 만들어 다른 모듈과의 인터페이스를 통해 상호작용하게 하는 것이다.
   - 따라서 독립성, 재사용성, 유지보수성, 테스트 용이성이라는 이점을 갖는다.

### 내부 클래스의 장점 : 두 클래스의 멤버들이 서로 쉽게 접근할 수 있고, 외부에는 불필요한 관계 클래스를 감춤으로써 코드의 복잡성을 줄일 수 있다.

내부 클래스는 정의 위치와 범위, 용도에 따라 4가지로 나뉜다.

## 멤버 클래스 (Member Class):

- 정의 위치: 다른 클래스 내부에 선언된다.
- 범위: 외부 클래스의 인스턴스 멤버로, 외부 클래스의 인스턴스를 생성한 후 사용된다.
- 용도: 외부 클래스와 밀접한 관련이 있는 기능을 구현할 때 사용된다.
    - 주로 외부 클래스의 필드와 메소드에 접근 가능하다.
    - 외부 클래스의 인스턴스를 생성한 후에 사용할 수 있고, 일반적으로 외부 클래스의 인스턴스를 통해 접근한다.
    - 멤버 클래스는 주로 외부 클래스와 밀접한 관련이 있는 기능을 구현할 때 사용된다.
    - 로컬 클래스는 특정 메소드나 블록에서만 필요한 기능을 구현할 때 사용된다.

### 멤버클래스의 종류
 - 인스턴스 멤버 클래스 : A 클래스의 객체를 생성해야만 사용할 수 있는 클래스 B 
<pre>
<code>
class A {
    class B {...}
}

 - 정적 멤버 클래스 : 클래스 A로 바로 접근할 수 있는 클래스 B
    - static의 특성으로 어디서든 접근이 가능하기 때문에 바로 접근할 수 있다.

 class A {
    static class B {...}
 }
</code>
</pre>

## 로컬 클래스 (Local Class):

- 정의 위치: 메소드나 생성자 내부에 선언된다.
- 범위: 해당 메소드나 생성자의 지역 범위 내에서만 유효하다.
- 용도: 특정 메소드에서만 필요한 기능을 구현하고 해당 메소드 내부에서만 사용할 때 사용된다.
    - 특정 메소드나 블록 내에서만 사용되는 클래스이다.
    - 주로 해당(위치하고 있는) 메소드나 블록 내에서만 필요한 기능을 가진 클래스를 정의할 때 사용된다.
    - 메소드가 사라지면 로컬 클래스도 사라진다.

### 로컬 클래스

<pre>
<code>
 class A {
    void method() {
        class B {...}
    }
 }
</code>
</pre> 

클래스 A의 메소드 안에 정의된 클래스 B, 클래스 A의 method()가 실행될 떄만 사용할 수 있는 클래스 B


## 익명 클래스 (Anonymous Class):

- 정의 위치: 주로 인터페이스의 구현이나 추상 클래스의 하위 클래스를 생성할 때 익명으로 선언된다.
- 범위: 해당 선언이 이루어진 위치에서 유효하다.
- 용도: 한 번만 사용할 구현체가 필요한 경우나 간단한 인터페이스 구현을 위해 사용된다.
    - 이름이 없는 클래스로, 주로 인터페이스의 구현이나 추상 클래스의 하위 클래스를 생성할 때 사용된다.
    - 재사용성, 유지보수 등의 측면에서 불리하고, 그렇기 때문에 한번만 사용 후 사라진다.

## 정적 클래스 (Static Nested Class):

- 정의 위치: 외부 클래스 내부에 선언되지만 static 키워드로 정적 선언된다.
- 범위: 외부 클래스의 인스턴스와 독립적으로 사용 가능하다.
- 용도: 외부 클래스와 강한 관련성이 있지만 외부 클래스의 인스턴스와 독립적으로 생성될 수 있는 경우에 사용된다.
 - 정적 멤버 클래스로, static 키워드로 선언되고 외부 클래스의 인스턴스와 독립적으로 사용된다.
 - 바깥 객체가 필요 없이, 독립적으로 사용할 수 있다.
 - 내부 클래스가 외부 클래스의 생성과 무관하게 사용할 수 있어야 하고, 정적 변수도 사용할 수 있어야 할 때 사용한다.


내부클래스도 하나의 클래스이기에 컴파일 하면 바이트 코드 파일(.class)가 별도로 생성된다.

멤버클래스일 경우 바이트 코드 파일의 이름
 - A(바깥 클래스) $ B(내부(멤버) 클래스).class

로컬클래스일 경우 바이트 코드 파일의 이름
 - A(바깥 클래스) $1 B(내부(로컬) 클래스).class

정적클래스일 경우 바이트 코드 파일의 이름  
 - A(바깥 클래스) $ B(내부(멤버) 클래스).class

익명클래스이 경우 바이트 코드 파일의 이름
 - A(바깥 클래스) $ 1(일련의 숫자).class
    - 익명클래스는 이름이 없기 때문에, 순서에 맞게 숫자로 등장한다.
    - 위의 예시를 보면 1번째로 사용된 익명클래스임을 알려준다.  
    
## 멤버 클래스의 종류  

### 인스턴스 멤버 클래스   
인스턴스 멤버 클래스는 static 키워드 없이 내부에 선언된 클래스이다.
따라서 인스턴스 멤버 클래스는 인스턴스 필드와 메소드만 선언이 가능하고 정적 필드와 메소드는 선언할 수 없다.

인스턴스 변수는 객체마다 별도로 존재하며 객체의 상태를 나타내고, static 멤버는 모든 객체가 공유하는 변수 또는 메소드이기 때문이다.

<pre>
<code>
class A {
    // 인스턴스 멤버 클래스
    class B {
        B() {} --- 생성자
        int field1; --- 인스턴스 필드
        static int field2; --- 정적 필드(x)
        void method1() {} --- 인스턴스 메소드
        static void method2() {} --- 정적 메소드(x)
    }
}
</pre>
</code>

A 클래스 외부에서 B 객체를 생성하려면 먼저 A객체를 생성하고 그 다음에 B객체를 생성해야 한다.

<pre>
<code>
A 클래스 외부

A a = new A(); // 먼저 선행 되어야 한다.
A.B b = a.new B();
b.field1 = 3;
b.method1();
</code>
</pre>

A 클래스 내부의 생성자 및 인스턴스 메소드에서는 일반 클래스처럼 B객체를 생성할 수 있다.

<pre>
<code>
A 클래스 내부

class A {
    class B {...}

    void methodA() { // A의 생성자를 생성하지 않고도, 객체 생성이 가능하다.
        B b = new B();
        b.field1 = 3;
        b.method1();
    }
}
</code>
</pre>

일반적으로 A 클래스의 외부에서 B객체를 생성하는 일은 거의 없고 대부분 A 클래스 내부에서 생성해서 사용한다.
  
### 정적 멤버 클래스

정적 멤버 클래스 : static으로 선언된 클래스
 - 정적 멤버 클래스는 모든 종류의 필드와 메소드 선언 가능
<pre>
<code>
 class A {
    // 정적 멤버 클래스
    static class C {
        C() {} --- 생성자
        int field1; --- 인스턴스 필드
        static int field2; --- 정적 필드
        void method1() {} --- 인스턴스 메소드
        static void method2() {} --- 정적 메소드
    }
 }
</code>
</pre>

 A 클래스의 외부에서 정적 멤버 클래스 C의 객체를 생성하기 위해서는 A객체를 생성할 필요가 없다.

<pre>
<code>
 A.C c = new A.C();
 c.field1 = 3; --- 인스턴스 필드 사용
 c.method1(); --- 인스턴스 메소드 호출
 A.C.field2 = 3; --- 정적 필드 사용
 A.C.method2(); --- 정적 메소드 호출
</code>
</pre>

그러나 정적 클래스 내부에서는 정적 멤버에, 인스턴스 멤버에 접근할 때는 외부 클래스의 인스턴스 생성 후 접근이 권장된다.

### 로컬 클래스
 메소드 내에서 선언되는 내부 클래스 : 로컬(local) 클래스

 생성자 또는 메소드 블럭 내에 선언된 내부 클래스

 로컬 클래스는 접근 제한자(public, private) 및 static을 붙일 수 없다.
  - 메소드 내부에서만 사용되므로 접근 제한할 이유가 없기 때문이다.
  - 로컬 클래스 내부에는 인스턴스 필드와 메소드만 선언할 수 있고, 정적 필드와 메소드는 선언할 수 없기 때문이다.

<pre>
<code>
  void method() { // 메소드 내부
    // 로컬 클래스
    class D {
        D() {} --- 생성자
        int field1; --- 인스턴스 필드 
        static int field2; --- 정적 필드(x)
        void method1() {} --- 인스턴스 메소드
        static void method2() {} --- 정적 메소드(x)
    }
    D d = new D();
    d.field1 = 3;
    d.method1();
  }
</code>
</pre>

 ## 내부 클래스의 접근 제한

#### 멤버 클래스
멤버 클래스는 외부 클래스와 같은 접근 제한을 가집니다. 즉, 기본(default), public, protected, private 등의 제한자를 사용할 수 있다.


#### 로컬 클래스
로컬 클래스는 해당 메소드나 블록 내에서만 유효하기 때문에 외부에서는 접근할 수 없다.

#### 익명 클래스
익명 클래스도 해당 선언이 이루어진 위치에서만 유효하며, 외부에서 직접적으로 접근할 수 없다.

#### 정적 클래스
정적 클래스는 외부 클래스의 정적 멤버와 같은 접근 제한을 가집니다.   
따라서 외부에서는 정적 클래스에 직접적으로 접근할 수 있다.


## 내부클래스에서 바깥 클래스 참조 얻기
 - 클래스 내부에서는 this를 사용하여 객체 자신을 참조한다.

 - 내부 클래스에서 바깥 클래스의 객체 참조를 하려면 바깥 클래스의 이름을 앞에 붙여서 사용한다.
    - 바깥 클래스.this.필드
    - 바깥 클래스.this.메소드(); 로 사용하면 된다.


### 요약
- 인스턴스 멤버 클래스는 바깥 클래스의 객체가 있어야 사용할 수 있다( O )
    - 인스턴스 멤버 클래스는 외부 클래스의 인스턴스와 관련이 있으므로 해당 인스턴스가 없으면 사용할 수 없습니다.    
  
  
- 정적 멤버 클래스는 바깥 클래스의 객체가 없어도 사용될 수 있다( O )
    - 정적 멤버 클래스는 외부 클래스의 인스턴스와 독립적으로 동작하며, 해당 인스턴스가 없어도 생성 및 사용이 가능합니다.    
  
  
- 인스턴스 멤버 클래스 내부에는 바깥 클래스의 필드와 메소드를 사용할 수 있다( O )
    - 인스턴스 멤버 클래스는 외부 클래스의 인스턴스와 관련이 있으며, 따라서 해당 인스턴스의 필드와 메소드에 접근할 수 있습니다.    
  
  
- 정적 멤버 클래스 내부에는 바깥 클래스의 인스턴스 필드를 사용할 수 있다( X )
    - 정적 멤버 클래스는 외부 클래스의 인스턴스와 독립적이기 때문에 인스턴스 멤버에 직접적으로 접근할 수 없습니다.    
  
  
- 로컬 클래스는 생성자 또는 메소드 내부에 선언된 클래스를 말한다( O )
    -  로컬 클래스는 특정 메소드나 생성자 내부에서만 사용되며, 해당 범위 내에서 유효합니다.    
  
  
- 로컬 클래스도 필드와 생성자를 가질 수 있다( O )
    - 로컬 클래스는 일반적인 클래스와 마찬가지로 필드와 생성자를 가질 수 있습니다.    
  
  
- 로컬 클래스는 static 키워드를 이용해서 정적 클래스로 만들 수 있다( X )
    - 로컬 클래스는 특정 메소드나 생성자 내에서만 사용되기 때문에 정적(static)으로 만들 수 없습니다.    














